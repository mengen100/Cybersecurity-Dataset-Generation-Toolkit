events {
    worker_connections 1024;
}

http {
    # Basic firewall rules
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
    
    # Block SQL injection attempts
    server {
        listen 8080;
        
        # Limit request rate
        limit_req zone=one burst=5;
        
        # Block requests with SQL injection patterns
        if ($query_string ~* "([;'\"<>]|--)|(/\*)|(\b(union|select|insert|update|delete|from|where|drop|table|database)\b)") {
            return 403;
        }
        
        location / {
            proxy_pass http://web_server:5000;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
    }
}